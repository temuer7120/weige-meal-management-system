# 母婴服务禁忌管理系统功能

## 1. 系统概述

母婴服务禁忌管理系统是月子餐食管理系统的核心组成部分，旨在确保母婴服务过程中的饮食和服务安全，避免禁忌冲突，保障妈妈和宝宝的健康。本系统通过标准化的禁忌信息管理、自动识别和预警机制，为母婴服务提供科学依据。

### 1.1 核心目标

1. **饮食禁忌管理**：
   - 产后妈妈饮食禁忌：避免生冷、辛辣、高盐、油腻、酒精等食物
   - 回奶食物管理：识别和避免韭菜、大麦茶、花椒等回奶食材
   - 哺乳期饮食指导：确保母乳质量和宝宝健康

2. **服务禁忌管理**：
   - 产后护理禁忌：避免过早剧烈运动、长时间卧床等
   - 环境禁忌：控制温度、湿度、通风等环境因素
   - 操作禁忌：规范服务流程，避免不当操作

3. **智能预警机制**：
   - 实时禁忌冲突检测
   - 个性化禁忌推荐
   - 服务风险评估

4. **数据驱动决策**：
   - 禁忌规则标准化
   - 服务质量监控
   - 持续优化改进

## 2. 数据库结构

### 2.1 核心数据表

#### 2.1.1 食材表 (ingredients)

| 字段名 | 数据类型 | 描述 | 备注 |
| :--- | :--- | :--- | :--- |
| id | INTEGER | 食材ID | 主键 |
| name | VARCHAR(255) | 食材名称 | 唯一 |
| category | VARCHAR(100) | 食材类别 | 如蔬菜、肉类等 |
| current_stock | DECIMAL(10,2) | 当前库存 | |
| unit_of_measure | VARCHAR(50) | 计量单位 | 如个、斤、kg等 |
| unit_cost | DECIMAL(10,2) | 单位价格 | |
| description | TEXT | 食材描述 | |
| calories_per_unit | DECIMAL(10,2) | 每单位热量 | |
| nutrition_info | JSON | 营养成分 | JSON格式存储 |
| shelf_life_days | INTEGER | 保质期(天) | |
| image_url | VARCHAR(255) | 图片URL | |
| created_at | TIMESTAMP | 创建时间 | |
| updated_at | TIMESTAMP | 更新时间 | |

#### 2.1.2 菜品表 (dishes)

| 字段名 | 数据类型 | 描述 | 备注 |
| :--- | :--- | :--- | :--- |
| id | INTEGER | 菜品ID | 主键 |
| name | VARCHAR(255) | 菜品名称 | 唯一 |
| nutrition_info | JSON | 营养成分 | JSON格式存储 |
| price | DECIMAL(10,2) | 价格 | |
| total_weight | DECIMAL(10,2) | 总重量 | |
| category_id | INTEGER | 分类ID | 外键 |
| is_active | BOOLEAN | 是否启用 | 默认true |
| image_url | VARCHAR(255) | 图片URL | |
| taboo_info | TEXT | 菜品禁忌 | |
| suitable_for | TEXT | 适合人群 | |
| not_suitable_for | TEXT | 禁忌人群 | |
| service_taboo | TEXT | 服务禁忌 | |
| created_at | TIMESTAMP | 创建时间 | |
| updated_at | TIMESTAMP | 更新时间 | |

#### 2.1.3 菜品-食材关联表 (dish_ingredients)

| 字段名 | 数据类型 | 描述 | 备注 |
| :--- | :--- | :--- | :--- |
| id | INTEGER | 关联ID | 主键 |
| dish_id | INTEGER | 菜品ID | 外键 |
| ingredient_id | INTEGER | 食材ID | 外键 |
| quantity | DECIMAL(10,2) | 用量 | |
| created_at | TIMESTAMP | 创建时间 | |

#### 2.1.4 客户表 (customers)

| 字段名 | 数据类型 | 描述 | 备注 |
| :--- | :--- | :--- | :--- |
| id | INTEGER | 客户ID | 主键 |
| name | VARCHAR(100) | 客户姓名 | |
| age | INTEGER | 年龄 | |
| delivery_date | DATE | 分娩日期 | |
| health_status | TEXT | 健康状况 | |
| dietary_preferences | TEXT | 饮食偏好 | |
| dietary_restrictions | TEXT | 饮食禁忌 | |
| service_restrictions | TEXT | 服务禁忌 | |
| created_at | TIMESTAMP | 创建时间 | |
| updated_at | TIMESTAMP | 更新时间 | |

#### 2.1.5 订单表 (orders)

| 字段名 | 数据类型 | 描述 | 备注 |
| :--- | :--- | :--- | :--- |
| id | INTEGER | 订单ID | 主键 |
| customer_id | INTEGER | 客户ID | 外键 |
| dish_id | INTEGER | 菜品ID | 外键 |
| order_date | DATE | 订单日期 | |
| serving_date | DATE | 配送日期 | |
| quantity | INTEGER | 数量 | |
| status | VARCHAR(50) | 状态 | 如待处理、已完成等 |
| created_at | TIMESTAMP | 创建时间 | |
| updated_at | TIMESTAMP | 更新时间 | |

### 2.2 扩展数据表

#### 2.2.1 禁忌规则表 (taboo_rules)

| 字段名 | 数据类型 | 描述 | 备注 |
| :--- | :--- | :--- | :--- |
| id | INTEGER | 规则ID | 主键 |
| rule_name | VARCHAR(255) | 规则名称 | |
| rule_type | VARCHAR(50) | 规则类型 | 如饮食禁忌、服务禁忌等 |
| description | TEXT | 规则描述 | |
| severity_level | INTEGER | 严重程度 | 1-5级 |
| applicable_period | VARCHAR(100) | 适用时期 | 如产后1周、哺乳期等 |
| related_ingredients | TEXT | 相关食材 | JSON格式存储 |
| related_dishes | TEXT | 相关菜品 | JSON格式存储 |
| exception_conditions | TEXT | 例外情况 | |
| created_at | TIMESTAMP | 创建时间 | |
| updated_at | TIMESTAMP | 更新时间 | |

#### 2.2.2 禁忌规则详情表 (taboo_rule_details)

| 字段名 | 数据类型 | 描述 | 备注 |
| :--- | :--- | :--- | :--- |
| id | INTEGER | 详情ID | 主键 |
| rule_id | INTEGER | 规则ID | 外键 |
| detail_type | VARCHAR(50) | 详情类型 | 如具体禁忌、注意事项等 |
| content | TEXT | 详情内容 | |
| reference_source | VARCHAR(255) | 参考来源 | 如医学指南、专家建议等 |
| created_at | TIMESTAMP | 创建时间 | |
| updated_at | TIMESTAMP | 更新时间 | |

#### 2.2.3 禁忌规则-食材关联表 (rule_ingredient_mappings)

| 字段名 | 数据类型 | 描述 | 备注 |
| :--- | :--- | :--- | :--- |
| id | INTEGER | 关联ID | 主键 |
| rule_id | INTEGER | 规则ID | 外键 |
| ingredient_id | INTEGER | 食材ID | 外键 |
| created_at | TIMESTAMP | 创建时间 | |

#### 2.2.4 禁忌规则-菜品关联表 (rule_dish_mappings)

| 字段名 | 数据类型 | 描述 | 备注 |
| :--- | :--- | :--- | :--- |
| id | INTEGER | 关联ID | 主键 |
| rule_id | INTEGER | 规则ID | 外键 |
| dish_id | INTEGER | 菜品ID | 外键 |
| created_at | TIMESTAMP | 创建时间 | |

## 3. 信息流

### 3.1 数据输入流程

1. **食材禁忌信息输入**
   - 通过食材管理界面手动输入
   - 通过自动识别功能从图片识别
   - 通过名称自动查询填充
   - 批量导入标准化禁忌数据

2. **菜品禁忌信息输入**
   - 通过菜品管理界面手动输入
   - 通过网络查询分解自动填充
   - 通过食材组合自动计算生成
   - 基于禁忌规则自动匹配

3. **客户禁忌信息输入**
   - 通过客户管理界面手动输入
   - 通过健康评估表单自动导入
   - 基于分娩日期自动计算产后时期
   - 个性化禁忌设置

4. **服务禁忌信息输入**
   - 标准化服务流程禁忌录入
   - 环境参数禁忌设置
   - 操作规范禁忌定义
   - 服务人员资质要求设置

### 3.2 数据处理流程

1. **禁忌信息验证**
   - 系统自动验证输入的禁忌信息格式
   - 检查禁忌信息的完整性和准确性
   - 验证禁忌信息的科学依据和参考来源

2. **禁忌规则匹配**
   - 根据客户的健康状况和产后时期，匹配相应的禁忌规则
   - 检查菜品和食材是否符合客户的禁忌要求
   - 评估禁忌规则的适用程度和优先级

3. **禁忌冲突检测**
   - 在订单生成前，检测所选菜品是否与客户禁忌冲突
   - 实时监控食材使用，避免使用禁忌食材
   - 检测服务流程是否符合禁忌规则要求

4. **风险评估与预警**
   - 评估禁忌冲突的严重程度
   - 生成风险等级和预警信息
   - 提供替代方案和解决方案

5. **个性化推荐**
   - 基于客户情况推荐适合的食材和菜品
   - 提供个性化的服务方案
   - 优化饮食和服务计划

### 3.3 数据输出流程

1. **禁忌信息展示**
   - 在食材和菜品详情页面展示禁忌信息
   - 在客户订单页面展示相关禁忌提示
   - 在服务预约页面显示服务禁忌注意事项
   - 生成个性化的饮食和服务禁忌手册

2. **禁忌预警**
   - 当选择禁忌食材或菜品时，系统自动弹出预警信息
   - 在订单确认前，显示完整的禁忌检查报告
   - 在服务执行前，提供服务禁忌核对清单
   - 实时监控服务过程中的禁忌风险

3. **统计分析**
   - 生成禁忌规则执行情况报告
   - 分析常见禁忌问题和解决方案
   - 评估服务质量和禁忌管理效果
   - 提供持续改进建议

4. **决策支持**
   - 为管理层提供禁忌管理数据分析
   - 支持服务流程优化决策
   - 辅助食材和菜品采购计划
   - 提供市场趋势分析

## 4. 相关界面

### 4.1 食材管理界面

#### 4.1.1 功能模块
- 食材列表展示
- 食材添加/编辑表单
- 图片上传与识别
- 营养成分管理
- 禁忌信息管理
  - 禁忌信息输入
  - 适合人群
  - 禁忌人群
  - 使用禁忌
  - 回奶食物标识
  - 产后时期禁忌设置
- 自动查询填充功能
- 禁忌规则关联

#### 4.1.2 界面布局
- 左侧：食材列表
- 右侧：食材详情编辑区
  - 基本信息
  - 图片上传
  - 营养成分
  - 禁忌信息
    - 饮食禁忌标签页
    - 服务禁忌标签页
    - 禁忌规则关联标签页
- 底部：操作按钮

#### 4.1.3 饮食禁忌管理功能
- 自动识别生冷、辛辣、高盐、油腻等禁忌食材
- 标记回奶食物和慎用食材
- 关联产后不同时期的饮食指导
- 提供食材替代建议

### 4.2 菜品管理界面

#### 4.2.1 功能模块
- 菜品列表展示
- 菜品添加/编辑表单
- 食材组合管理（拖拽功能）
- 营养成分自动计算
- 禁忌信息管理
  - 菜品禁忌
  - 适合人群
  - 禁忌人群
  - 服务禁忌
  - 产后时期适配性
  - 回奶风险评估
- 网络查询分解功能
- 禁忌冲突检测

#### 4.2.2 界面布局
- 左侧：菜品列表
- 右侧：菜品详情编辑区
  - 基本信息
  - 图片上传
  - 食材组合
  - 禁忌信息
    - 饮食禁忌标签页
    - 服务禁忌标签页
    - 禁忌冲突检测标签页
  - 网络查询
- 底部：操作按钮

#### 4.2.3 菜品禁忌管理功能
- 基于食材组合自动生成菜品禁忌
- 评估菜品对不同产后时期的适用性
- 检测回奶风险和其他饮食风险
- 提供菜品调整建议和替代方案

### 4.3 客户管理界面

#### 4.3.1 功能模块
- 客户列表展示
- 客户信息添加/编辑
- 健康状况管理
- 饮食偏好设置
- 服务禁忌管理
- 产后时期计算与管理
- 个性化禁忌规则设置
- 订单历史查询
- 禁忌信息导出

#### 4.3.2 界面布局
- 左侧：客户列表
- 右侧：客户详情编辑区
  - 基本信息
  - 健康状况
  - 饮食偏好与禁忌
    - 饮食禁忌标签页
    - 服务禁忌标签页
    - 产后时期设置标签页
  - 订单历史
- 底部：操作按钮

#### 4.3.3 客户禁忌管理功能
- 基于分娩日期自动计算产后时期
- 个性化设置客户饮食和服务禁忌
- 生成客户专属的禁忌管理手册
- 提供针对性的饮食和服务建议

### 4.4 订单管理界面

#### 4.4.1 功能模块
- 订单列表展示
- 订单添加/编辑
- 菜品选择
- 禁忌冲突检测
- 配送安排
- 订单状态管理
- 禁忌风险评估
- 替代方案推荐

#### 4.4.2 界面布局
- 左侧：订单列表
- 右侧：订单详情编辑区
  - 基本信息
  - 客户信息
  - 菜品选择
  - 禁忌检查报告
    - 饮食禁忌检测标签页
    - 服务禁忌检测标签页
    - 风险评估标签页
  - 配送信息
- 底部：操作按钮

#### 4.4.3 订单禁忌管理功能
- 实时检测订单菜品与客户禁忌的冲突
- 生成详细的禁忌检查报告
- 提供菜品替代方案
- 记录订单禁忌处理历史

### 4.5 禁忌规则管理界面

#### 4.5.1 功能模块
- 规则列表展示
- 规则添加/编辑
- 规则分类管理
- 规则应用范围设置
- 规则优先级管理
- 规则导入/导出
- 规则版本管理

#### 4.5.2 界面布局
- 左侧：规则列表
- 右侧：规则详情编辑区
  - 基本信息
  - 规则描述
  - 适用范围
  - 严重程度
  - 关联食材/菜品
  - 规则详情
- 底部：操作按钮

#### 4.5.3 禁忌规则管理功能
- 标准化饮食禁忌规则管理
- 标准化服务禁忌规则管理
- 规则分级和分类管理
- 规则适用时期设置
- 规则冲突检测和解决

## 5. 功能匹配程度

### 5.1 已实现功能

| 功能模块 | 实现状态 | 匹配程度 | 备注 |
| :--- | :--- | :--- | :--- |
| 食材禁忌信息管理 | 已实现 | 90% | 支持基本的禁忌信息输入和自动填充 |
| 菜品禁忌信息管理 | 已实现 | 95% | 支持详细的禁忌信息管理和自动填充 |
| 食材自动识别 | 已实现 | 85% | 支持图片上传和基本识别功能 |
| 网络查询分解 | 已实现 | 80% | 支持菜品网络查询和分解 |
| 营养成分计算 | 已实现 | 90% | 支持基于食材组合的营养计算 |
| 禁忌自动填充 | 已实现 | 85% | 支持基于名称的禁忌信息自动填充 |
| 饮食禁忌基本管理 | 已实现 | 80% | 支持基本的饮食禁忌信息管理 |

### 5.2 待实现功能

| 功能模块 | 优先级 | 实现难度 | 预期完成时间 |
| :--- | :--- | :--- | :--- |
| 禁忌规则管理系统 | 高 | 中 | 2周 |
| 客户禁忌信息管理 | 高 | 低 | 1周 |
| 禁忌冲突检测 | 高 | 中 | 2周 |
| 禁忌预警机制 | 高 | 低 | 1周 |
| 服务禁忌管理系统 | 高 | 中 | 2周 |
| 回奶食物管理 | 高 | 低 | 1周 |
| 产后时期禁忌管理 | 高 | 中 | 2周 |
| 禁忌统计分析 | 中 | 中 | 2周 |
| 移动端禁忌查询 | 中 | 高 | 3周 |

### 5.3 功能差距分析

1. **禁忌规则系统**
   - 差距：缺少标准化的禁忌规则管理
   - 影响：无法实现自动化的禁忌规则匹配和冲突检测
   - 建议：建立完整的禁忌规则表和关联关系

2. **客户禁忌管理**
   - 差距：客户界面未完全实现禁忌信息管理
   - 影响：无法针对特定客户进行个性化的禁忌管理
   - 建议：完善客户管理界面，添加禁忌信息模块

3. **禁忌冲突检测**
   - 差距：缺少订单级别的禁忌冲突检测
   - 影响：无法在订单生成前预防禁忌冲突
   - 建议：实现订单与客户禁忌的自动匹配检测

4. **禁忌预警机制**
   - 差距：缺少实时的禁忌预警功能
   - 影响：用户可能在不知情的情况下选择禁忌食材或菜品
   - 建议：在各界面添加实时的禁忌预警提示

5. **服务禁忌管理**
   - 差距：缺少完整的服务禁忌管理系统
   - 影响：无法规范服务流程和操作规范
   - 建议：建立服务禁忌规则库和管理界面

6. **回奶食物管理**
   - 差距：缺少专门的回奶食物标识和管理
   - 影响：可能导致哺乳期妈妈意外食用回奶食物
   - 建议：建立回奶食物数据库和自动识别机制

7. **产后时期禁忌管理**
   - 差距：缺少基于产后不同时期的禁忌管理
   - 影响：无法提供针对性的饮食和服务指导
   - 建议：实现产后时期自动计算和禁忌规则匹配

## 6. 系统完善建议

### 6.1 数据库层面

1. **添加禁忌规则相关表**
   - 实现标准化的禁忌规则管理
   - 支持规则的分级和分类管理
   - 建立饮食禁忌和服务禁忌的专门表结构

2. **优化现有表结构**
   - 在食材表和菜品表中添加更多禁忌相关字段
   - 完善客户表的禁忌信息存储结构
   - 添加产后时期和回奶风险等专门字段

3. **建立关联关系**
   - 建立禁忌规则与食材、菜品的多对多关系
   - 建立客户与禁忌规则的关联关系
   - 建立服务流程与禁忌规则的关联关系

### 6.2 功能层面

1. **完善禁忌信息管理**
   - 实现禁忌信息的标准化录入
   - 支持禁忌信息的批量导入和导出
   - 建立回奶食物数据库和标识系统

2. **增强自动识别能力**
   - 提升食材图片识别的准确率
   - 扩展网络查询的数据源和覆盖范围
   - 实现服务禁忌的自动识别和预警

3. **实现智能匹配**
   - 基于客户健康状况自动匹配适合的食材和菜品
   - 实现禁忌规则的智能推荐和预警
   - 基于产后时期自动调整禁忌规则

4. **添加统计分析功能**
   - 生成禁忌规则执行情况报告
   - 分析常见禁忌问题和解决方案
   - 评估服务质量和禁忌管理效果

5. **服务禁忌管理**
   - 实现标准化的服务流程禁忌管理
   - 建立环境参数和操作规范禁忌
   - 实现服务人员资质和操作规范管理

### 6.3 界面层面

1. **统一界面风格**
   - 保持各界面的设计一致性
   - 优化用户交互体验

2. **增强视觉提示**
   - 使用不同颜色标识禁忌严重程度
   - 添加直观的图标和提示信息
   - 实现实时的禁忌预警弹窗

3. **实现响应式设计**
   - 支持PC端和移动端的自适应布局
   - 优化触摸屏操作体验

4. **添加帮助文档**
   - 为各功能模块添加详细的使用说明
   - 提供常见问题的解决方案
   - 生成客户专属的禁忌管理手册

### 6.4 集成层面

1. **与其他系统集成**
   - 与健康管理系统集成，获取客户健康数据
   - 与配送系统集成，确保禁忌信息传递到配送环节
   - 与服务预约系统集成，实现服务禁忌管理

2. **API接口设计**
   - 设计标准化的API接口，支持第三方系统调用
   - 实现禁忌信息的实时同步和更新
   - 提供移动端禁忌查询API

3. **数据安全**
   - 加强客户禁忌信息的隐私保护
   - 实现数据的备份和恢复机制
   - 建立数据访问权限控制

## 7. 开发工作重要依据

### 7.1 开发优先级

1. **第一阶段**（1-2周）
   - 完善数据库结构，添加禁忌规则相关表
   - 实现客户禁忌信息管理功能
   - 开发禁忌冲突检测机制
   - 建立回奶食物数据库和标识系统

2. **第二阶段**（2-3周）
   - 实现禁忌规则管理界面
   - 增强自动识别和查询功能
   - 开发禁忌预警和提示系统
   - 实现服务禁忌管理系统

3. **第三阶段**（3-4周）
   - 实现统计分析功能
   - 开发移动端适配
   - 与其他系统集成
   - 实现产后时期禁忌管理系统

### 7.2 技术选型

1. **前端技术**
   - Vue 3 + TypeScript
   - Element Plus UI库
   - Vite构建工具
   - Axios网络请求

2. **后端技术**
   - Flask + Python
   - SQLAlchemy ORM
   - MySQL数据库
   - JWT认证

3. **AI技术**
   - 食材图片识别API
   - 自然语言处理（NLP）用于禁忌信息提取
   - 机器学习模型用于禁忌规则匹配
   - 服务禁忌自动识别算法

### 7.3 测试策略

1. **功能测试**
   - 测试各模块的基本功能
   - 验证禁忌信息的正确存储和显示
   - 测试饮食禁忌和服务禁忌的管理功能

2. **集成测试**
   - 测试模块间的集成和数据流转
   - 验证禁忌冲突检测的准确性
   - 测试系统与其他系统的集成

3. **用户测试**
   - 邀请相关人员进行用户测试
   - 收集反馈并优化界面和功能
   - 测试不同用户角色的使用场景

4. **性能测试**
   - 测试系统在大量数据下的性能
   - 验证响应时间和稳定性
   - 测试禁忌冲突检测的效率

### 7.4 部署计划

1. **开发环境**
   - 本地开发环境搭建
   - 版本控制和代码管理

2. **测试环境**
   - 独立的测试服务器
   - 完整的测试数据
   - 模拟生产环境配置

3. **生产环境**
   - 高性能服务器部署
   - 数据库备份和监控
   - 灾备方案
   - 定期安全审计

### 7.5 实施路径

1. **准备阶段**
   - 需求分析和确认
   - 技术架构设计
   - 数据库结构设计

2. **开发阶段**
   - 核心功能开发
   - 界面开发和优化
   - 集成和测试

3. **部署阶段**
   - 系统部署
   - 数据迁移
   - 用户培训

4. **运维阶段**
   - 系统监控
   - 问题修复
   - 功能迭代

## 8. 结论

母婴服务禁忌管理系统是保障母婴健康的重要组成部分，通过标准化的禁忌信息管理、自动化的冲突检测和智能化的预警机制，可以有效避免母婴服务中的禁忌冲突，提高服务质量和安全性。

### 8.1 系统价值

1. **饮食禁忌管理**：
   - 有效识别和管理产后妈妈的饮食禁忌
   - 预防回奶食物的意外食用
   - 确保哺乳期饮食的科学性和安全性

2. **服务禁忌管理**：
   - 规范服务流程和操作规范
   - 确保服务环境和操作符合母婴健康要求
   - 提高服务质量和客户满意度

3. **智能预警机制**：
   - 实时检测和预警禁忌冲突
   - 提供个性化的饮食和服务建议
   - 降低服务风险和安全隐患

4. **数据驱动决策**：
   - 提供详细的禁忌管理数据分析
   - 支持服务流程优化和质量改进
   - 为管理层提供决策依据

### 8.2 实施建议

1. **分阶段实施**：按照开发优先级，分阶段实现系统功能
2. **持续优化**：根据实际使用情况，不断优化系统功能和性能
3. **培训与推广**：加强用户培训，确保系统的有效使用
4. **数据安全**：加强数据安全管理，保护客户隐私

本功能文档为系统的开发和完善提供了详细的指导，包括数据库结构、信息流、界面设计和功能实现建议。通过分阶段的开发计划和严格的测试策略，可以确保系统的稳定性和可靠性，为母婴服务提供科学、安全的技术支持。

母婴服务禁忌管理系统的成功实施，将为月子餐食管理系统增添重要的安全保障，确保母婴服务的科学性和专业性，为妈妈和宝宝的健康保驾护航。