# 餐食管理系统

## 项目简介

餐食管理系统是一个综合性平台，旨在帮助管理员高效管理客户信息、菜品数据、每日排餐和厨房原材料。系统支持自动和手动排餐，并提供警示功能，确保客户的饮食禁忌得到充分考虑。系统还支持数据导出功能，方便管理员生成采购清单和客户餐单。

## 系统功能模块

1. **客户管理**：

   - 录入客户基本信息（姓名、年龄、入住日期、禁忌食材等）。
   - 支持客户信息的查询和修改。
   - 支持图片上传/拍照功能，通过OCR识别自动填充信息。
2. **菜品管理**：

   - 管理菜品分类（汤品、点心、肉菜、蔬菜等）。
   - 记录菜品的食材组成和禁忌食材。
   - 支持菜品的增删改查操作。
   - 支持图片上传/拍照功能，通过OCR识别自动填充信息。
3. **排餐管理**：

   - 根据客户周期和禁忌生成每日餐单。
   - 支持手动调整餐单，并提供禁忌警示功能。
   - 合并相同菜品，优化餐单生成。
4. **原材料管理**：

   - 管理食材库存，包括名称、数量、供应商等信息。
   - 支持生成采购清单并导出。
   - 支持图片上传/拍照功能，通过OCR识别自动填充信息。
5. **日志管理**：

   - 记录系统操作日志和风险事件。
   - 支持日志的查询和导出。
6. **支付功能**：

   - 支持微信支付、支付宝支付、银行卡支付。
   - 支持客户预定支付、餐费支付、员工薪资发放、供应商付款等场景。
   - 支持交易记录管理、交易状态查询、交易对账、退款管理。
7. **微信小程序**：

   - 客户端：客户查看每日餐单和历史餐单，在线预约服务，支付定金。
   - 管理端：管理员查看客户信息和排餐情况，员工打卡，考勤统计。

## 页面结构

### 1. 客户管理页面

- **用途**：录入和管理客户信息。
- **布局**：表单布局，包含姓名、年龄、入住日期、禁忌食材等字段。
- **样式**：使用CSS Flexbox实现响应式设计。

### 2. 菜品管理页面

- **用途**：管理菜品分类和食材信息。
- **布局**：表格布局，支持增删改查操作。
- **样式**：使用CSS Grid布局，确保数据展示清晰。

### 3. 排餐管理页面

- **用途**：生成和调整每日餐单。
- **布局**：分为自动排餐和手动调整两个部分。
- **样式**：使用卡片式设计，突出禁忌警示。

### 4. 原材料管理页面

- **用途**：管理食材库存和生成采购清单。
- **布局**：表格布局，支持数据导出功能。
- **样式**：简洁明了，重点突出库存预警。

### 5. 日志页面

- **用途**：查看系统操作日志和风险事件。
- **布局**：时间轴布局，便于查看历史记录。
- **样式**：使用渐变背景，提升视觉效果。

## 技术栈

### 前端
- **核心框架**：Vue 3、Vite
- **状态管理**：Pinia
- **路由**：Vue Router
- **UI组件库**：Element Plus
- **网络请求**：Axios
- **工具库**：Day.js、VeeValidate、ECharts、XLSX、Cropper.js、Tesseract.js

### 后端
- **语言**：Python 3.8+
- **Web框架**：Flask 2.0+
- **ORM**：SQLAlchemy 1.4+
- **数据库**：MySQL
- **认证**：JWT（JSON Web Token）
- **缓存**：Redis（可选）
- **支付集成**：微信支付API、支付宝API、银行卡支付API

### 数据库
- **主数据库**：MySQL
- **设计原则**：规范化设计、完整性约束、可扩展性、性能优化

### 微信小程序
- **开发框架**：原生开发框架
- **技术**：WXML/WXSS/JavaScript

## 系统架构

### 架构风格
- **RESTful API**：使用HTTP方法和状态码表示操作和结果
- **分层架构**：
  - **路由层**：处理HTTP请求和响应
  - **业务逻辑层**：实现核心业务逻辑
  - **数据访问层**：与数据库交互
  - **服务层**：提供外部服务集成

### 多平台支持
- **网页端**：PC和PAD自适应
- **移动端**：Android和iOS响应式适配
- **微信小程序**：客户端和管理端

## 开发环境搭建

### 前端环境
1. 安装Node.js 16.0+
2. 克隆项目代码
3. 进入frontend目录
4. 安装依赖：`npm install`
5. 启动开发服务器：`npm run dev`

### 后端环境
1. 安装Python 3.8+
2. 克隆项目代码
3. 进入backend目录
4. 创建虚拟环境：`python -m venv venv`
5. 激活虚拟环境：
   - Windows: `venv\Scripts\activate`
   - Linux/Mac: `source venv/bin/activate`
6. 安装依赖：`pip install -r requirements.txt`
7. 配置数据库连接
8. 启动开发服务器：`python run.py`

### 数据库环境
1. 安装MySQL 5.7+
2. 创建数据库：`CREATE DATABASE meal_system CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;`
3. 配置数据库用户和权限

## 开发计划

1. **需求分析与设计**：2周
2. **数据库设计与实现**：1周
3. **后端API开发**：2周
4. **前端开发**：2周
5. **微信小程序开发**：2周
6. **支付集成**：1周
7. **测试与优化**：2周
8. **部署与上线**：1周

## 优化建议

- 使用HTML5高级特性（如Canvas）提升用户体验。
- 压缩CSS和图片资源，优化页面加载速度。
- 定期更新系统功能，满足用户新增需求。

## 修改记录

### 2026-02-10

1. **登录页修改**：
   - 移除了WeigeCo标识，添加了首页、关于我们、服务项目、联系我们的相关内容
   - 将'餐食管理系统'改为'服务项目'，将系统功能展示改为母婴服务项目名称（月子护理、产后修复、新生儿护理、母婴用品）
   - 实现了登录注册表单的自动清空和回车跳转功能：
     - 组件挂载时自动清空表单内容
     - 登录表单按回车自动跳转到密码输入框，再按回车自动登录
     - 注册表单按回车顺序跳转到下一个输入框，最后按回车自动注册
   - 移除了注册表单中的角色选择框，注册用户只有最低的浏览服务项目和餐食菜单的权限

2. **布局组件修改**：
   - 将'公司管理系统'改为'上海巍阁母婴护理中心'
   - 调整了logo的样式，确保新的名称能够完整显示
   - 添加了权限控制逻辑，根据用户角色显示不同的菜单项：
     - 管理员：可以看到所有功能
     - 经理：可以看到员工管理、财务管理、统计分析、订单管理
     - 员工：可以看到食材管理、菜品管理、菜单管理、订单管理、母婴服务
     - 客户：只能看到母婴服务

3. **退出功能修改**：
   - 将退出按钮独立出来，放在右上角的最右边
   - 用户信息在退出按钮左侧并排显示，包括用户头像、角色和用户名

4. **品牌标识更新**：
   - 统一使用'上海巍阁母婴护理中心'作为系统品牌标识
   - 移除了所有WeigeCo相关的标识和文字
